<div class="container">
    <mat-card class="mat-elevation-z8">
        <mat-card-header>
          <mat-card-title color="primary">Home's details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="homeForm">
                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>Home Number</mat-label>
                    <input 
                        matInput 
                        placeholder="Home Number"
                        type="text" 
                        formControlName="home"
                        maxlength="20"
                        >
                    <mat-icon matSuffix>location_city</mat-icon>
                    <mat-error *ngIf="homeForm.controls['home'].invalid 
                                && (homeForm.controls['home'].touched)">
                        Incorrect home's number
                    </mat-error>
                </mat-form-field>
                <br>
    
                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>Street</mat-label>
                    <input 
                        matInput 
                        placeholder="Street"
                        type="text" 
                        formControlName="street"
                        maxlength="30"
                        >
                    <mat-icon matSuffix>location_city</mat-icon>
                    <mat-error *ngIf="homeForm.controls['street'].invalid 
                                    && (homeForm.controls['street'].touched)">
                        Incorrect street
                    </mat-error>
                </mat-form-field>
                <br>

                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>City</mat-label>
                    <input 
                        matInput 
                        placeholder="City"
                        type="text" 
                        formControlName="city"
                        >
                    <mat-icon matSuffix>location_city</mat-icon>

                    <mat-error *ngIf="( homeForm.controls['city'].invalid && homeForm.controls['city'].touched)">
                        Incorrect city
                    </mat-error>
                </mat-form-field>
                <br>

                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>State</mat-label>
                    <input 
                        matInput 
                        placeholder="State"
                        type="text" 
                        formControlName="state"
                        >
                    <mat-icon matSuffix>location_city</mat-icon>

                    <mat-error *ngIf="( homeForm.controls['state'].invalid && homeForm.controls['state'].touched)">
                        Incorrect state
                    </mat-error>
                </mat-form-field>
                <br>

                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>Index</mat-label>
                    <input 
                        matInput 
                        placeholder="Index"
                        type="number" 
                        formControlName="index"
                        >
                    <mat-icon matSuffix>location_city</mat-icon>

                    <mat-error *ngIf="( homeForm.controls['index'].invalid && homeForm.controls['index'].touched)">
                        Incorrect index
                    </mat-error>
                </mat-form-field>
                <br>

                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>Price</mat-label>
                    <input 
                        matInput 
                        placeholder="Price"
                        type="text" 
                        formControlName="price"
                        maxlength="30"
                        >
                    <mat-icon matSuffix>monetization_on</mat-icon>
                    <mat-error *ngIf="homeForm.controls['price'].invalid 
                                    && (homeForm.controls['price'].touched)">
                        Incorrect price
                    </mat-error>
                </mat-form-field>
                <br>
                
                <mat-form-field class="form-control" appearance="outline">
                    <mat-label>Sales since</mat-label>
                    <input 
                        matInput
                        placeholder="dd.mm.yyyy"
                        [matDatepicker]="dp"
                        formControlName="start_date"
                        appMaxDateValidator="0"
                        appMinDateValidator="200"
                        >
                    <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                    <mat-datepicker #dp></mat-datepicker>

                    <mat-error *ngIf="homeForm.controls['start_date'].hasError('dateValidator') 
                                    && (homeForm.controls['start_date'].touched)">
                        Incorrect date
                    </mat-error>
                    <mat-error *ngIf="homeForm.controls['start_date'].hasError('maxDateValidator')">
                        More than today's date
                    </mat-error>
                    <mat-error *ngIf="homeForm.controls['start_date'].hasError('minDateValidator')">
                        Home is over 200 years old
                    </mat-error>
                </mat-form-field>
                <br>
            </form>


            <table *ngIf="!isAddingMode" class="table">
                <tr>
                    <td>Adding Date</td>
                    <td>{{home.createdAt | date:'dd-MM-yyyy'}}</td>
                </tr>
                <tr *ngIf="home.clientOwner">
                    <td>Bought By</td>
                    <td>
                        <a mat-button color="primary" [routerLink]="['/clients/profile', home?.clientOwner.id]">
                            {{home?.clientOwner.surname }}
                        </a>
                    </td>
                </tr>
            </table>

        </mat-card-content>
        <mat-card-actions class="actions-wrapper">
            <button mat-raised-button
            (click)="onCancelButtonClick()">
                Cancel
            </button>

            <button mat-raised-button
            (click)="onCancelButtonClick()">
                Back
            </button>

            <button mat-raised-button
                class="button"
                color="primary"
                [disabled]="!homeForm.valid"
                (click)="onSave()"
            >
            Save
            </button>
        </mat-card-actions>
    </mat-card>

    
</div>






