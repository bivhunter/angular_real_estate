<div class="container">

  


    <div class="head-wrapper">
          <!-- table -->
    <table class="table">
    <tbody>
        <!-- head row -->
        <tr class="head-row">
            <td class="img-cell">Home</td>
            <td class="home-cell"
                [class.sort-up]="(sortingMethod$ | async) === 'HOME_UP'"
                [class.sort-down]="(sortingMethod$ | async) === 'HOME_DOWN'"
                (click)="setSortingField('HOME')">â„–
            </td>
            <td class="street-cell"
                [class.sort-up]="(sortingMethod$ | async) === 'STREET_UP'"
                [class.sort-down]="(sortingMethod$ | async) === 'STREET_DOWN'"
                (click)="setSortingField('STREET')">Street
                
            </td>
            <td class="city-cell"
                [class.sort-up]="(sortingMethod$ | async) === 'CITY_UP'"
                [class.sort-down]="(sortingMethod$ | async) === 'CITY_DOWN'"
                (click)="setSortingField('CITY')">City</td>
            <td class="state-cell"
                [class.sort-up]="(sortingMethod$ | async) === 'STATE_UP'"
                [class.sort-down]="(sortingMethod$ | async) === 'STATE_DOWN'"
                (click)="setSortingField('STATE')">State</td>
            <td class="price-cell"
                [class.sort-up]="(sortingMethod$ | async) === 'PRICE_UP'"
                [class.sort-down]="(sortingMethod$ | async) === 'PRICE_DOWN'"
                (click)="setSortingField('PRICE')">Price</td>
            <td class="details-cell">Actions</td>
            <td class="delete-cell"></td>
        </tr>
    </tbody>
    </table>
    <div class="scroll"></div>
    </div>

        <div class="content">
            <table class="table">
                <tbody>
                <!-- content rows -->
                <tr *ngFor="let home of homes">
                    <td class="img-cell tooltip" (click)="onDetailsButton(home.id)">
                        <span class="tooltip-text" >Details</span>
                        <div class="profile-img" 
                            
                            >     
                            <img class="sold-img" src="../../../../../assets/images/sold.png" *ngIf="home.clientOwner">
                            </div>
                        </td>
                    
                    <td class="home-cell">{{home.home}}</td>
                    <td class="street-cell">{{home.street}}</td>
                    <td class="city-cell">{{home.city}}</td>
                    <td class="state-cell">{{home.state}}</td>
                    <td class="price-cell">{{home.price | currency: 'CAD':'symbol-narrow':'1.0-0':'fr'}}</td>
                    <td class="details-cell"  >
                        <div class="details-button-wrapper">
                            <button class="profile-button"
                                (click)="onDetailsButton(home.id)">
                                Details
                            </button>
            
                            <button class="viewed-clients-button"
                            (click)="onViewedClient(home)">
                            Clients who viewed
                            </button>
            
                            <button class="addclient-button"
                                (click)="onAddClient(home)" [disabled]="home.clientOwner">
                                Add client who viewed
                            </button>
                        </div>
        
                    </td> 
                    <td class="delete-cell">
                        <div class="delete-button"
                            *ngIf="!home.clientOwner"
                            (click)="onDeleteButton(home)">X
                        </div>  
                        <div class="delete-button hidden"
                            *ngIf="home.clientOwner"
                           > 
                        </div>  
                     </td>
                 </tr>
            </tbody>
            </table>
        </div>

        

     <!-- adding clients list popup -->
    <div class="popup-client-list" *ngIf="isPopupListClients">
        <app-clients-list-selector
            [home]="currentHome"
            (closeEvent)="isPopupListClients = false"
            [adding]="isAdding"
        >

        </app-clients-list-selector>
    </div>




        <!-- deleting popup menu -->
    <div class="popup-wrapper" *ngIf="isPopup">
        <div class="popup"  >
            <h3 class=popup-header>Delete home!</h3>
            <h3>{{homeForDelete.price | currency: 'CAD':'symbol-narrow':'1.0-0':'fr'}}</h3>
            <p>{{homeForDelete.home + ' ' + homeForDelete.street}}</p>
            <p>{{homeForDelete.city + ' ' + homeForDelete.state}}</p>
            <h3 class=popup-header>Are you sure?</h3>
            <div class="buttons-wrapper">
                <button 
                    type=button 
                    (click)="deleteHome(homeForDelete.id)"
                    class="yes-button">
                    Yes
                </button>
        
                <button 
                    (click)="isPopup=false"
                    type=button 
                    class="no-button">
                    No
                </button>
            </div>
        </div>
    </div>
</div>

<!-- cover div -->
<div *ngIf="isPopup" class="cover-div">
</div>

