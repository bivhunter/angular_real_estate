<div class="container">
    <h1>Registration</h1>
    
    <form #registrationForm="ngForm"
        *ngIf = "!registration.status"
        (ngSubmit)="email.reset(user.email); onSubmit();"> 
        <p class="h-text"> Don't have an account? Create free account</p>
        <div class="form-group">
            <label for="fullName">Full Name</label>
            <input 
                #fullname="ngModel"
                type="text" 
                class="form-control" 
                id="fullName"
                [(ngModel)] = "user.fullName"
                name="fullName"
                placeholder="Enter your Name and Surname"
                pattern="[A-Za-zА-Яа-яЁё]+\s[A-Za-zА-Яа-яЁё]+"
                required
               >
            <div class="alert" 
                [ngSwitch]="fullname.invalid && (fullname.touched)">
                <div class="alert-danger" *ngSwitchCase="true">Bad Full Name</div>
                <div *ngSwitchDefault> </div>
            </div>       
        </div>
      
        <div class="form-group">
            <label for="email">Email</label>
            <input 
                #email="ngModel"
                type="email" 
                class="form-control" 
                id="email" 
                required
                [(ngModel)]="user.email"
                name="email"
                placeholder="Enter your email"
                pattern= "\w[[A-Za-z0-9_]*[@]\w\S+$"
                [class.invalid]="!isUniqueEmail && email.pristine"  
                >
            <div class="alert" 
                [ngSwitch]="email.invalid && (email.touched)">
                <div class="alert-danger" *ngSwitchCase="true">Incorrect email</div>
                <div class="alert-danger" *ngIf="!isUniqueEmail && email.pristine" >
                    This email already exists
                </div> 
                <div *ngSwitchDefault> </div>
            </div>   
        </div>

     
        <div class="form-group">
            <label for="paswword">Password</label>
            <input 
                #password="ngModel"
                autocomplete="new-password"
                type="password" 
                class="form-control" 
                id="paswword" 
                required
                minlength="6"
                [(ngModel)]="user.password"
                name="password"
                placeholder="Enter your password"
                >

                <div class="alert" 
                [ngSwitch]="password.invalid && (password.touched)">
                <div class="alert-danger" 
                    *ngSwitchCase="true">Password must be longer than 5 characters</div>
                <div *ngSwitchDefault> </div>
                </div>     
        </div>

        <div class="form-group">
            <label for="rate">Rate</label>
            <input 
                #rate="ngModel"
                type="text" 
                class="form-control" 
                id="rate"
                [(ngModel)]="user.rate"
                required
                pattern="[1-9]\d*"
                name="rate"
                placeholder="Enter rate">

                <div class="alert" 
                [ngSwitch]="rate.invalid && (rate.touched)">
                <div class="alert-danger" 
                    *ngSwitchCase="true">Incorrect number</div>
                <div *ngSwitchDefault> </div>
                </div>     
        </div>

        <div class="form-group-checkbox">
            <input type="checkbox" class="form-control-checkbox" id="terms"
                [(ngModel)]="isAcceptedTerms"
                required
                name="terms">I accept terms and Conditions
        </div>

      <button type="submit" class="button-submit"
        [disabled]="!registrationForm.form.valid"
        >Create Account</button>

    </form>
    <div>
        <p class="h-text">{{registration.text}}
            <a routerLink='/login' class="route-link">Sign in</a>
            please
        </p>
        
    </div>
</div>
